<!DOCTYPE html>
<html>
<head lang="zh-cn">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="viewport"
			content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
	<title>Amaze UI React</title>
	<meta name="renderer" content="webkit">
	<!-- No Baidu Siteapp-->
	<meta http-equiv="Cache-Control" content="no-siteapp"/>
	<link rel="alternate icon" type="image/png" href="i/favicon.png">
	<link rel="apple-touch-icon-precomposed" href="i/app-icon72x72@2x.png">
	<meta name="apple-mobile-web-app-title" content="AMUI React"/>
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<link rel="stylesheet" href="http://cdn.amazeui.org/amazeui/2.4.0/css/amazeui.min.css"/>
	<script src="js/dependencies/react.min.js"></script>
	<script src="js/dependencies/browser.min.js"></script>
	<script src="http://cdn.amazeui.org/amazeui-react/1.0.0-beta1/amazeui.react.js"></script>	
</head>
<body>
    <div id="main"></div>
	
<script type="text/babel">
var PHONE_SCREEN_WIDTH = 480;
var PAD_SCREEN_WIDTH = 960;
var MIDDLE_PC_SCREEN_WIDTH = 1366;

var Header = AMUIReact.Header;
var Image = AMUIReact.Image;

var Message = React.createClass({
	render: function() {
		var messageStyle = {
			'margin': '0px 30px',
		};
		var avatarStyle = {
			'float': 'left',
			'margin': '10px',
		};
		var messageInfoContainerStyle = {
			'margin-left': 60,
			'color': 'snow',
		};
		var messageContentContainerStyle = {
			'margin': '0px 60px',
			'background-color': 'rgba(230,230,230,0.8)',
			'word-brea': 'normal',
   	 		'word-wrap': 'break-word',
			'padding': '10px',
			'border-radius': '10px',
		};
		return (
			<div style={messageStyle}>
				<div style={avatarStyle}>
					<Image src="images/head.png" width="40px" height="40px" circle></Image>
				</div>
				<div style={messageInfoContainerStyle}>
					<span>碎碎酱</span>
					<span>11:11:11</span>
				</div>
				<div style={messageContentContainerStyle}>
					<span>大家好，我是新人。放假啊离开圣诞节发了快速的减肥拉快速的减肥了哈上看到了放假啊啦可是对方就阿拉山口地方就阿拉山口地方就阿拉山口地方<br/>666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666</span>
				</div>
			</div>
		);
	}
});
var InputForm = React.createClass({
	render: function() {
		var textareaContainerStyle = {
			'width': this.props.width,
			'height': this.props.height,
		};
		var textareaStyle = {
			'width': this.props.width,
			'height': this.props.height,
			'background-color': 'rgba(0,0,0,0.5)',
			'border-bottom-left-radius': 10,
    		'border-bottom-right-radius': 10,
			'color': 'snow',
			'padding': 10,
		};
		return (
			<div style={textareaContainerStyle}>
				<textarea style={textareaStyle}></textarea>
			</div>
		);
	}
});
var HeadForm = React.createClass({
	render: function() {
		var pcHeadStyle = {
			'height': this.props.height,
			'background-color': 'black',
		};
		var pcHeadElementContainerStyle = {
			'height': this.props.height,
			'max-width': 1366 * 0.618,
			'margin': '0 auto',
		};
		var productInfoStyle = {
			'font-size': 30,
			'margin-left': 50,
			'color': 'snow',
		};
		var userInfoStyle = {
			'font-size': 16,
			'margin-right': 50,
			'float': 'right',
			'color': 'snow',
			'margin-top': 20,
		};
		
		
		return (
			<div>
				<div style={pcHeadStyle}>
					<div style={pcHeadElementContainerStyle}>
						<span style={productInfoStyle}>轻聊</span>
						<span style={userInfoStyle}>碎碎酱</span>
					</div>
				</div>
			</div>
		);
	}
});

var BodyForm = React.createClass({
	getDefaultProps: function() {
		return {
			toolbarFormHeight: 30,
			inputFormHeight: 80,
		};
	},
	render: function() {
		var bodyStyle = {
			'width': this.props.width,
			'height': this.props.height,
			'background-image': 'url("images/react-background.png")',
		};
		var chatFormStyle = {
			'max-width': 1366 * 0.618,
			'height': this.props.height,
			'margin': '0px auto',
			'background-color': 'rgba(0,0,0,0.5)',
			'border-bottom-left-radius': 10,
    		'border-bottom-right-radius': 10,
		};
		var messageFormStyle = {
			'height': this.props.height - this.props.toolbarFormHeight - this.props.inputFormHeight,
		};
		var toolbarFormStyle = {
			'height': this.props.toolbarFormHeight,
			'background-color': 'rgba(153,153,153,0.5)',
		};
		
		return (
			<div style={bodyStyle}>
				<div style={chatFormStyle}>
					<div style={messageFormStyle}>
						<Message avatar="images/head.png" nickname="碎碎酱" time="11:11:11" message="大家好，我是新人。"></Message>
					</div>
					<div style={toolbarFormStyle}></div>
					<InputForm width={this.props.width < chatFormStyle['max-width'] ? this.props.width : chatFormStyle['max-width']} height={this.props.inputFormHeight}></InputForm>
				</div>
			</div>
		);
	}
});

var MainForm = React.createClass({
	getDefaultProps: function() {
		return {

		};
	},
	
	getInitialState: function() {
		return {
			viewport: {
				width: window.innerWidth,
				height: window.innerHeight
			}
		};
	},
	
	handleViewPortResize: function() {
		this.setState({
			viewport: {
				width: window.innerWidth,
				height: window.innerHeight
			}
		});
	},
	
	componentDidMount: function() {
		window.addEventListener('resize', this.handleViewPortResize);
	},
	
	componentWillUnmount: function() {
		window.removeEventListener('resize', this.handleViewPortResize);
	},
	
	render: function() {
		var mainFormStyle = {
			'width': this.state.viewport.width,
			'height': this.state.viewport.height,
		};
		var headFormHeight = 50;
		return (
			<div style={mainFormStyle}>
				<HeadForm width={this.state.viewport.width} height={headFormHeight}/>
				<BodyForm width={this.state.viewport.width} height = {this.state.viewport.height - headFormHeight}/>
			</div>
		);
	}
});

React.render(<MainForm />, document.getElementById('main'));
</script>
</body>
</html>